# GlowBarn OS for x86_64
# Paranormal Research Operating System
# Live USB / PC Installation
# Based on Buildroot 2024.02.x

# Architecture
BR2_x86_64=y
BR2_x86_corei7=y

# System
BR2_TARGET_GENERIC_HOSTNAME="glowbarn"
BR2_TARGET_GENERIC_ISSUE="Welcome to GlowBarn OS - Paranormal Research Operating System"
BR2_SYSTEM_DHCP="eth0"
BR2_TARGET_GENERIC_GETTY_PORT="tty1"
BR2_TARGET_GENERIC_GETTY_BAUDRATE_115200=y
BR2_TARGET_GENERIC_ROOT_PASSWD="paranormal"

# Kernel
BR2_LINUX_KERNEL=y
BR2_LINUX_KERNEL_CUSTOM_VERSION=y
BR2_LINUX_KERNEL_CUSTOM_VERSION_VALUE="6.6.32"
BR2_LINUX_KERNEL_USE_CUSTOM_CONFIG=y
BR2_LINUX_KERNEL_CUSTOM_CONFIG_FILE="$(BR2_EXTERNAL_GLOWBARN_PATH)/board/glowbarn/x86_kernel.config"
BR2_LINUX_KERNEL_INSTALL_TARGET=y
BR2_LINUX_KERNEL_NEEDS_HOST_OPENSSL=y

# Bootloader - GRUB2 for x86
BR2_TARGET_GRUB2=y
BR2_TARGET_GRUB2_X86_64_EFI=y
BR2_TARGET_GRUB2_BUILTIN_MODULES_EFI="boot linux ext2 fat part_msdos part_gpt normal efi_gop"

# Filesystem
BR2_TARGET_ROOTFS_EXT2=y
BR2_TARGET_ROOTFS_EXT2_4=y
BR2_TARGET_ROOTFS_EXT2_SIZE="4G"
BR2_ROOTFS_OVERLAY="$(BR2_EXTERNAL_GLOWBARN_PATH)/overlay"
BR2_ROOTFS_POST_BUILD_SCRIPT="$(BR2_EXTERNAL_GLOWBARN_PATH)/board/glowbarn/post-build.sh"
BR2_ROOTFS_POST_IMAGE_SCRIPT="$(BR2_EXTERNAL_GLOWBARN_PATH)/board/glowbarn/post-image-x86.sh"

# Custom scripts location
BR2_ROOTFS_POST_SCRIPT_ARGS="$(BR2_EXTERNAL_GLOWBARN_PATH)"

# genimage for disk image
BR2_PACKAGE_HOST_GENIMAGE=y
BR2_PACKAGE_HOST_DOSFSTOOLS=y
BR2_PACKAGE_HOST_MTOOLS=y

# Init system
BR2_INIT_SYSTEMD=y

# Toolchain
BR2_TOOLCHAIN_BUILDROOT_GLIBC=y
BR2_TOOLCHAIN_BUILDROOT_CXX=y
BR2_ENABLE_LOCALE_PURGE=y

# Core packages
BR2_PACKAGE_BUSYBOX=y
BR2_PACKAGE_DROPBEAR=y
BR2_PACKAGE_DROPBEAR_CLIENT=y
BR2_PACKAGE_HTOP=y
BR2_PACKAGE_NANO=y
BR2_PACKAGE_BASH=y
BR2_PACKAGE_SUDO=y

# Networking
BR2_PACKAGE_DHCPCD=y
BR2_PACKAGE_WPASUPP=y
BR2_PACKAGE_WPASUPP_NL80211=y
BR2_PACKAGE_WPASUPP_WPA3=y
BR2_PACKAGE_IW=y
BR2_PACKAGE_WIRELESS_TOOLS=y
BR2_PACKAGE_HOSTAPD=y
BR2_PACKAGE_AVAHI=y
BR2_PACKAGE_AVAHI_DAEMON=y
BR2_PACKAGE_IPTABLES=y
BR2_PACKAGE_NFTABLES=y
BR2_PACKAGE_ETHTOOL=y

# Python for GlowBarn app
BR2_PACKAGE_PYTHON3=y
BR2_PACKAGE_PYTHON_PIP=y
BR2_PACKAGE_PYTHON_FLASK=y
BR2_PACKAGE_PYTHON_NUMPY=y
BR2_PACKAGE_PYTHON_PILLOW=y
BR2_PACKAGE_PYTHON_REQUESTS=y
BR2_PACKAGE_PYTHON_PYSERIAL=y
BR2_PACKAGE_PYTHON_FLASK_CORS=y
BR2_PACKAGE_PYTHON_SCIPY=y
BR2_PACKAGE_PYTHON_MATPLOTLIB=y

# GPIO and hardware access (USB adapters)
BR2_PACKAGE_LIBGPIOD=y
BR2_PACKAGE_LIBGPIOD_TOOLS=y
BR2_PACKAGE_I2C_TOOLS=y
BR2_PACKAGE_LIBSERIALPORT=y

# Audio for EVP detection
BR2_PACKAGE_ALSA_UTILS=y
BR2_PACKAGE_ALSA_LIB=y
BR2_PACKAGE_PULSEAUDIO=y
BR2_PACKAGE_PORTAUDIO=y
BR2_PACKAGE_SOX=y

# Video/Camera
BR2_PACKAGE_V4L_UTILS=y
BR2_PACKAGE_MJPG_STREAMER=y
BR2_PACKAGE_OPENCV4=y
BR2_PACKAGE_OPENCV4_WITH_V4L=y
BR2_PACKAGE_OPENCV4_LIB_PYTHON=y

# Display/GUI
BR2_PACKAGE_XORG7=y
BR2_PACKAGE_XSERVER_XORG_SERVER=y
BR2_PACKAGE_XDRIVER_XF86_VIDEO_VESA=y
BR2_PACKAGE_XDRIVER_XF86_VIDEO_FBDEV=y
BR2_PACKAGE_XDRIVER_XF86_INPUT_LIBINPUT=y
BR2_PACKAGE_MESA3D=y
BR2_PACKAGE_MESA3D_DRI_DRIVER_I965=y
BR2_PACKAGE_MESA3D_GALLIUM_DRIVER_IRIS=y
BR2_PACKAGE_MESA3D_GALLIUM_DRIVER_NOUVEAU=y
BR2_PACKAGE_MESA3D_GALLIUM_DRIVER_RADEONSI=y
BR2_PACKAGE_MESA3D_OPENGL_ES=y
BR2_PACKAGE_MESA3D_OPENGL_GLX=y
BR2_PACKAGE_WESTON=y
BR2_PACKAGE_WESTON_DRM=y
BR2_PACKAGE_CAGE=y

# GTK for potential GUI apps
BR2_PACKAGE_LIBGTK3=y

# Web server
BR2_PACKAGE_LIGHTTPD=y
BR2_PACKAGE_NGINX=y

# Database for logging
BR2_PACKAGE_SQLITE=y
BR2_PACKAGE_POSTGRESQL=y

# USB support
BR2_PACKAGE_EUDEV=y
BR2_PACKAGE_LIBUSB=y
BR2_PACKAGE_USBUTILS=y

# Thermal and environmental sensors
BR2_PACKAGE_LM_SENSORS=y

# Serial communication
BR2_PACKAGE_MINICOM=y
BR2_PACKAGE_SCREEN=y
BR2_PACKAGE_PICOCOM=y

# Compression tools
BR2_PACKAGE_ZIP=y
BR2_PACKAGE_UNZIP=y
BR2_PACKAGE_XZ=y
BR2_PACKAGE_P7ZIP=y

# Development tools
BR2_PACKAGE_GDB=y
BR2_PACKAGE_STRACE=y
BR2_PACKAGE_LTRACE=y
BR2_PACKAGE_VALGRIND=y

# Terminal utilities
BR2_PACKAGE_TMUX=y
BR2_PACKAGE_VIM=y
BR2_PACKAGE_NCURSES=y

# File utilities
BR2_PACKAGE_RSYNC=y
BR2_PACKAGE_TREE=y
BR2_PACKAGE_FILE=y

# GlowBarn custom packages
BR2_PACKAGE_GLOWBARN=y
BR2_PACKAGE_GLOWBARN_SENSORS=y

# Timezone
BR2_TARGET_TZ_INFO=y
BR2_TARGET_LOCALTIME="America/New_York"

# Shell
BR2_SYSTEM_BIN_SH_BASH=y

# Firmware for common WiFi/network cards
BR2_PACKAGE_LINUX_FIRMWARE=y
BR2_PACKAGE_LINUX_FIRMWARE_IWLWIFI_7260=y
BR2_PACKAGE_LINUX_FIRMWARE_IWLWIFI_8000C=y
BR2_PACKAGE_LINUX_FIRMWARE_IWLWIFI_8265=y
BR2_PACKAGE_LINUX_FIRMWARE_IWLWIFI_9000=y
BR2_PACKAGE_LINUX_FIRMWARE_IWLWIFI_AX200=y
BR2_PACKAGE_LINUX_FIRMWARE_IWLWIFI_AX201=y
BR2_PACKAGE_LINUX_FIRMWARE_RTL_8188=y
BR2_PACKAGE_LINUX_FIRMWARE_RTL_8192=y
BR2_PACKAGE_LINUX_FIRMWARE_ATHEROS_10K=y
BR2_PACKAGE_LINUX_FIRMWARE_RALINK_RT2XX=y
